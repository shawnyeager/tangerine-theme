{{/*
Purpose: Renders an inline copy-to-clipboard widget with visual feedback

Parameters:
- value (string, required): Text value to copy to clipboard
- label (string, optional): Button label (default: "Copy")

Features:
- Displays value in monospace code element
- Copy button with click-to-copy functionality
- Visual feedback: button shows "Copied" in brand orange for 2 seconds
- Unique IDs generated from MD5 hash to allow multiple instances per page
- Uses Clipboard API for modern browser support

Usage:
{{< copy-inline value="https://example.com/feed.xml" >}}
{{< copy-inline value="shawn@shawnyeager.com" label="Copy Email" >}}
{{< copy-inline value="npub1abc..." label="Copy npub" >}}

Important Notes:
- Requires Clipboard API (supported in all modern browsers)
- Each instance generates unique function name to avoid conflicts
- Button styling uses CSS classes .rss-copy-btn and .copy-inline
- Visual feedback temporarily applies brand orange color inline
*/}}

{{- $value := .Get "value" -}}
{{- $label := .Get "label" | default "Copy" -}}
{{- $id := printf "copy_inline_%s" (md5 $value | replaceRE "[^a-zA-Z0-9]" "_") -}}
{{- $funcName := printf "%s_copy" $id -}}

{{- $html := printf `<div class="copy-inline"><code id="%s_url" class="rss-url">%s</code> <button onclick="%s()" id="%s_btn" class="rss-copy-btn">%s</button></div>

<script>
function %s() {
    const url = document.getElementById('%s_url').textContent;
    const btn = document.getElementById('%s_btn');

    navigator.clipboard.writeText(url).then(() => {
        btn.textContent = 'Copied';
        btn.style.color = 'var(--brand-orange)';
        btn.style.borderColor = 'var(--brand-orange)';

        setTimeout(() => {
            btn.textContent = '%s';
            btn.style.color = '';
            btn.style.borderColor = '';
        }, 2000);
    });
}
</script>` $id $value $funcName $id $label $funcName $id $id $label -}}
{{ $html | safeHTML }}
