{{/*
Purpose: Renders a copy-to-clipboard widget with visual feedback

Parameters:
- value (string, required): Text value to copy
- label (string, optional): Button label (default: "Copy")

Features:
- Displays value in monospace code element
- Click-to-copy button using Clipboard API
- Visual feedback: changes to "Copied" with orange color for 2 seconds
- Unique IDs generated from MD5 hash of value
- Inline JavaScript for standalone functionality
- Uses CSS custom properties for theming

Usage:
{{< copy-widget value="https://example.com/feed.xml" >}}
{{< copy-widget value="npub1..." label="Copy Nostr Key" >}}

Important Notes:
- Generates unique function name and element IDs using MD5 hash
- Requires browser support for navigator.clipboard API
- Timeout returns button to original state after 2 seconds
- Uses inline styles and safeHTML for complete control
*/}}

{{- $value := .Get "value" -}}
{{- $label := .Get "label" | default "Copy" -}}
{{- $id := printf "copy_widget_%s" (md5 $value | replaceRE "[^a-zA-Z0-9]" "_") -}}
{{- $funcName := printf "%s_copy" $id -}}

{{- $html := printf `<div class="rss-feed-card">
    <code id="%s_url" class="rss-url">%s</code>
    <button onclick="%s()" id="%s_btn" class="btn-ghost btn-ghost--muted rss-copy-btn">%s</button>
</div>

<script>
function %s() {
    const url = document.getElementById('%s_url').textContent;
    const btn = document.getElementById('%s_btn');

    navigator.clipboard.writeText(url).then(() => {
        btn.textContent = 'Copied';
        btn.style.color = 'var(--brand-orange)';
        btn.style.borderColor = 'var(--brand-orange)';

        setTimeout(() => {
            btn.textContent = '%s';
            btn.style.color = '';
            btn.style.borderColor = '';
        }, 2000);
    });
}
</script>` $id $value $funcName $id $label $funcName $id $id $label -}}
{{ $html | safeHTML }}
