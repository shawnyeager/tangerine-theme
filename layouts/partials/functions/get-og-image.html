{{/*
Purpose: Returns the Open Graph image URL for the current page

Parameters: None (uses page context)

Context Expected:
- .Params.image - Custom OG image path in frontmatter
- .Params.slug - Page slug for content-type-specific OG images
- .Type - Content type ("essays", "notes", etc.)
- .Site.Params.og_image - Fallback OG image

Returns: Absolute URL string for OG image

Logic Flow:
1. If page has custom image param → use it
2. Else if type="essays" and has slug → /images/og-essays/{slug}.png
3. Else if type="notes" and has slug → /images/og-notes/{slug}.png
4. Fallback to site default OG image
5. Return empty string if nothing found

Usage:
{{- $ogImageURL := partial "functions/get-og-image.html" . -}}

Important Notes:
- Returns absolute URL (uses absURL)
- Content-type-specific paths for essays and notes
- Slug-based OG images generated by external build script
- Always returns string (may be empty)
*/}}

{{- /* Returns the OG image URL for the current page */ -}}
{{- $ogImageURL := "" -}}
{{- if .Params.image -}}
  {{- $ogImageURL = .Params.image | absURL -}}
{{- else if eq .Type "essays" -}}
  {{- if .Params.slug -}}
    {{- $slug := .Params.slug -}}
    {{- $customOGPath := printf "/images/og-essays/%s.png" $slug -}}
    {{- $ogImageURL = $customOGPath | absURL -}}
  {{- else if .Site.Params.og_image -}}
    {{- $ogImageURL = .Site.Params.og_image | absURL -}}
  {{- end -}}
{{- else if eq .Type "notes" -}}
  {{- if .Site.Params.og_image -}}
    {{- $ogImageURL = .Site.Params.og_image | absURL -}}
  {{- end -}}
{{- else if .Site.Params.og_image -}}
  {{- $ogImageURL = .Site.Params.og_image | absURL -}}
{{- end -}}
{{- return $ogImageURL -}}
