{{/*
Purpose: Basic HTML meta tags (charset, viewport, description, author, canonical)

Context Expected:
- .IsHome - Whether this is the homepage
- .Title, .Site.Title - Page and site titles
- .Params.seo_title - Optional override for meta title (when H1 differs from SEO title)
- .Params.essay_title - Essay title for V4V pages (mirrors parent essay title)
- .Description, .Site.Params.description - Page and site descriptions
- .Site.Params.author.name - Author name
- .Permalink - Canonical URL
- .Site.Params.noindex - Whether to block search engines
*/}}

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="dark light">
{{- $metaTitle := .Params.seo_title | default .Title -}}
{{- if .IsHome -}}
  <title>{{ .Site.Title }}</title>
{{- else if eq .Kind "404" -}}
  <title>Not Found | {{ default .Site.Title .Site.Params.site_display_name }}</title>
{{- else if .Params.essay_title -}}
  {{- /* Per-essay V4V pages: mirror essay title format */ -}}
  <title>{{ .Params.essay_title }} | {{ default .Site.Title .Site.Params.site_display_name }}</title>
{{- else if eq .Kind "section" -}}
  {{- /* List pages */ -}}
  <title>{{ $metaTitle }} | {{ default .Site.Title .Site.Params.site_display_name }}</title>
{{- else -}}
  {{- /* Individual pages: Use seo_title if set, else .Title */ -}}
  <title>{{ $metaTitle }} | {{ default .Site.Title .Site.Params.site_display_name }}</title>
{{- end -}}
<meta name="description" content="{{ if .Description }}{{ .Description }}{{ else }}{{ .Site.Params.description }}{{ end }}">
<meta name="author" content="{{ .Site.Params.author.name }}">
<meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#1a1a1a" media="(prefers-color-scheme: dark)">
<link rel="canonical" href="{{ .Permalink }}">

<!-- Robots meta tag -->
<meta name="robots" content="{{ if .Site.Params.noindex }}noindex, nofollow{{ else }}index, follow, max-image-preview:large, max-snippet:-1{{ end }}">

<!-- Apple web app title -->
<meta name="apple-mobile-web-app-title" content="{{ .Site.Params.short_name | default .Site.Title }}">
