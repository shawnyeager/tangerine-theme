{{/*
Purpose: Renders site footer with optional email signup form and navigation links

Context Expected:
- .Kind - Page kind (hides signup on 404 pages)
- .Params.hide_footer_signup - Frontmatter flag to hide signup on specific pages
- .Site.Params.show_email_signup - Global toggle for email signup feature
- .Site.Params.email_signup_text - Subscription form intro text
- .Site.Params.email_signup_action - Form submission URL
- .Site.Params.plausible_form_event - Analytics event name for form submission
- .Site.Params.nostr, .github, .linkedin, .author.email - Social/contact links
*/}}

<footer aria-label="Site footer">
    {{/* Email subscription form (parameterized) */}}
    {{ if and .Site.Params.show_email_signup (ne .Kind "404") (not .Params.hide_footer_signup) }}
    <section class="email-subscription" aria-label="Newsletter signup">
        <p id="email-intro" class="email-signup-intro">{{ .Site.Params.email_signup_text | default "I send new essays and updates via email." }}</p>
        <form class="email-form" action="{{ .Site.Params.email_signup_action }}" method="post" target="popupwindow">
            <label for="email-subscribe" class="sr-only">Email address</label>
            <input type="email" id="email-subscribe" name="email" placeholder="you@example.com" required aria-describedby="email-intro" autocomplete="email" inputmode="email" title="Please enter a valid email address" spellcheck="false">
            <button type="submit" class="btn-ghost btn-ghost--muted{{ with .Site.Params.plausible_form_event }} plausible-event-name={{ . }}{{ end }}">Subscribe</button>
        </form>
    </section>
    {{ end }}

    {{/* Footer links */}}
    <div class="footer-links">
        {{ with .Site.Params.nostr }}<a href="{{ . }}">Nostr</a>{{ end }}
        {{ with .Site.Params.github }}<a href="{{ . }}">GitHub</a>{{ end }}
        {{ with .Site.Params.linkedin }}<a href="{{ . }}">LinkedIn</a>{{ end }}
        {{ with .Site.Params.author.email }}
            <a href="mailto:{{ . }}"{{ with $.Site.Params.plausible_events.contact_email }} class="plausible-event-name={{ . }}"{{ end }}>Email</a>
        {{ end }}
    </div>
</footer>
